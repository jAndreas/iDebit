define(["deferred","mediator","server","tools"],function(e,t,n,r){function o(){console.log("window.js init"),window.addEventListener("load",a,!1),window.addEventListener("beforeunload",f,!1)}function u(){}function a(){t.emit({name:"windowLoad"})}function f(){n.emit("close",{data:"Client App Exit"})}var i=Object.create(null),s=Function.prototype.apply.bind(e.when,null);return r.mixin(i).with({init:o,destroy:u}),i})